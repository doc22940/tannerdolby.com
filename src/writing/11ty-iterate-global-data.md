---
title: Generate Page Content From a Global Data File Using 11ty
shortname: 11ty Iterate Global Data
permalink: "/writing/web/{{ shortname | slug }}/"
dateCreated: October 8, 2020
datetime: 2020-10-08 00:00:00 Z
date: 2020-10-08
preview: There are many great features to choose from when building websites with Eleventy (11ty). One feature in particular that I find very useful is the ability to iterate over a global data file and generate page content using Nunjucks.
tags: 
    - 11ty
    - nunjucks
    - html
    - posts
post_tags:
    - 11ty
    - nunjucks
    - html
demo_image: 
    large: 
        src: /images/global-data-demo-lg.webp
        width: 1024w
    med: 
        src: /images/global-data-demo-medium.webp
        width: 640w
    small:
        src: /images/global-data-demo-small.webp
        width: 320w
    fallback:
        src: /images/global-data-demo-lg.jpg
    alt: Live demo of the markup generated by iterating a global data file in 11ty
---

{{ preview }}

In 11ty, after creating [Global Data files](https://www.11ty.dev/docs/data-global/) inside the `_data/*.js` directory, they can be accessed by any template in the project structure. I'm still a relatively new developer, but I think its safe to say we've all encountered that moment when faced with creating a large grid of repeating card elements (with different data) or a long listing column of values. 

Why sit there and type out 30 different `.card` containers when you can store each card elements data inside a global `.json` file. To then iterate through that global card data and generate 30 elements from only one `.card` containers markup within a layout or markdown file. This could be data fetched from an API and stored in a `.json` file or by simply typing in the data needed by hand into a `_data/*.json` file. 

<h2 id="cascade-note" class="dir-link">Working with the Data Cascade {% directlink "cascade-note" %}</h2>

Before going any further, I should mention that when building webpages using the Static Site Generator (SSG) Eleventy. Data is being merged from multiple sources before making its way to the template file that gets rendered in the site output directory `_site`. This is what Eleventy calls the [Data Cascade](https://www.11ty.dev/docs/data-cascade/) and its really neat.

<h2 id="data-sources" class="dir-link">Data Sources {% directlink "data-sources" %}</h3>

One of my favorite things about Eleventy is the fact that there isn't a prescribed way of merging data within the cascade. There is an [order of priority](https://www.11ty.dev/docs/data-cascade/#sources-of-data) for sources of data in the cascade but that data can defined however you would like. 

Here are a few options for data sources:
- [Computed Data](https://www.11ty.dev/docs/data-computed/)
- [Front Matter Data](https://www.11ty.dev/docs/data-frontmatter/) in a template or layout file.
- [Template and Directory](https://www.11ty.dev/docs/data-template-dir/) data files and lastly global data files.

<h2 id="create-global-data" class="dir-link">Creating a Global Data File {% directlink "create-global-data" %}</h2>

The global data folder in Eleventy is decided by the [dir.data](https://www.11ty.dev/docs/config/#directory-for-global-data-files) configuration. For this article I will only focus on `.json` global data but you can read more about [other global data](https://www.11ty.dev/docs/data-global/) available to templates if you'd like.

The example below creates an array of objects inside the `cards.json` global data file. Each employee card object in the array has some filler data to mimic a large page of profile cards or something of that nature.

{% filename "cards.json" %}

```json
[
    {
        "title": "Card One",
        "name": "Larry",
        "id": 1,
        "posititon": "Systems",
        "scheduled": {
            "monday": true,
            "tuesday": true,
            "wednesday": true,
            "thursday": true,
            "friday": false,
            "saturday": false,
            "sunday": false
        },
        "interests": [
            "Some rad stuff",
            "reading rad blog posts",
            "eleventy"
        ]
    }
]
```

Let's say there were X number of employees at this company and you didn't want to sequentially write out the HTML for each employee profile card. You can create a template file `profiles.njk` inside a new directory called `_includes/layouts/` and save a chunk of time by iterating through the array of card objects in `cards.json`. Below is an example of the `for` loop syntax in Nunjucks.

{% raw %}
```html
{% for item in sequence %}
    <h1>{{ item }}</h1>  
{% endfor %}
```
{% endraw %}

This way, you only write a small bit of template HTML for one profile container. Allowing the `for` loop to generate the rest from your global data. Also, this {% raw %}`{% code %}`{% endraw %} and {% raw %}`{{ variable }}`{% endraw %} syntax is the templating language [Nunjucks](https://mozilla.github.io/nunjucks/).

{% filename "profiles.njk" %}
{% raw %}
```html
<main class="card-grid">
{% for card in cards %}
    <div class="card">
        <h2>{{ card.title }} - #{{ card.id }}</h2>
        <p>Hi, I'm {{ card.name }} and I work in {{ card.position }}.</p>
        <h3>Interests</h3>
        <ul>
            {% for interest in card.interests %}
            <li>{{ interest }}</li>
            {% endfor %}
        </ul>
        <h3>Schedule</h3>
        <ol>
            <li>Sunday: {{ card.scheduled.sunday }}</li>
            <li>Monday: {{ card.scheduled.monday }}</li>
            <li>Tuesday: {{ card.scheduled.tuesday }}</li>
            <li>Wednesday: {{ card.scheduled.wednesday }}</li>
            <li>Thursday: {{ card.scheduled.thursday }}</li>
            <li>Friday: {{ card.scheduled.friday }}</li>
            <li>Saturday: {{ card.scheduled.saturday }}</li>
        </ol>
    </div>
{% endfor %}
</main>
```
{% endraw %}

<h2 id="using-layouts" class="dir-link">Connect the markdown file to a layout {% directlink "using-layouts" %}</h2>

Let's say you wanted to write an introduction paragraph underneath the main page title. To start, you would create a `.md` file and add some [front Matter data](https://www.11ty.dev/docs/data-frontmatter/) at the top of `cardBanner.md` inside the opening and closing document seperators, `---`. 

Front matter in 11ty uses [YAML](https://yaml.org/spec/1.2/spec.html) syntax. The `permalink` is called a [quoted scalar](https://yaml.org/spec/1.2/spec.html#id2760844) where the `title` and `layout` are scalars in the plain style. All the content outside of the document seperators are rendered as regular Markdown. 

Including a [permalink](https://www.11ty.dev/docs/permalinks/) in front matter data when using 11ty allows for URIs to leave out filename extensions. This page `cardBanner.md` will be written to the sites output as `/employees-page/index.html` and accessible from the `/employees-page/` URI.

{% filename "cardBanner.md" %}
{% raw %}
```yaml
---
title: XYZ Company Employee Profile Page
layout: layouts/profiles.njk
permalink: "/employees-page/"
---

Welcome to the employee home page for company XYZ. The employee cards contain the data fields: name, position, interests and weekly schedule. If you are a new employee and don't see your name on this list, please contact the HR department.

```
{% endraw %}

To include the markdown within the `cardBanner.md`, we can reference it inside the layout file `profiles.njk` using {% raw %}`{{ content }}`{% endraw %} and the `safe` filter. 

To access front matter data such as `title`, you can use {% raw %}`{{ variable }}`{% endraw %} which is Nunjucks variable syntax.

{% raw %}
```html
<body>
    <h1 style="text-align: center;">{{ title }}</h1>
    {{ content | safe }}
</body>
```
{% endraw %}

Here is a link to <a href="{{ page.url }}demo/">the live demo</a>.

<h2 id="conclusion" class="dir-link">Conclusion {% directlink "conclusion" %}</h3>

This is just one method of merging data in Eleventy and if you'd like to learn more. I suggest taking a look at some of the great features Eleventy has to offer such as [Collections](https://www.11ty.dev/docs/collections/), [Pagination](https://www.11ty.dev/docs/pagination/) and [Pages from Data](https://www.11ty.dev/docs/pages-from-data/). 

<h3 id="references" class="dir-link" onclick="">References {% directlink "references" %}</h3>

- [Eleventy](https://www.11ty.dev/docs/)
- [Nunjucks](https://mozilla.github.io/nunjucks/)